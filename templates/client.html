<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DDS-FocusPro V-1.4</title>

  <!-- Main Application Styles -->
  <link rel="stylesheet" href="../static/client.css" />
  
  <!-- External Libraries -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://dxdglobal.com/wp-content/uploads/2024/12/cropped-Favicon-1-180x180.webp">

</head>

<body>
  <!-- Center Arrow Drawer Button -->
  <button class="drawer-arrow-btn" id="drawerArrowBtn" onclick="toggleDrawer()" aria-label="Toggle navigation menu">
    <span class="arrow-icon">‚ñ∂</span>
  </button>

  <div class="container">
    <!-- Header -->
<div class="header">
        <div class="logo">
            <figure>
                <img src="./static/dds-logo.png" alt="DDS Logo" width="113px" height="auto" style="width: 113px !important;">
            </figure>
        </div>
        <div class="user-controls">
            <img id="profileImage" src="https://crm.deluxebilisim.com/assets/images/user_placeholder.png">
            <span id="displayUserName" style="margin-right: 10px;">Loading ...</span>
            
            <!-- Language Dropdown -->
            <div class="language-dropdown">
              <button class="language-btn" onclick="toggleLanguageDropdown()">
                <span id="currentLanguage">Dil</span>
                <span class="dropdown-arrow">‚ñº</span>
              </button>

              <!-- Language Dropdown Content -->

                <div class="language-dropdown-content" id="languageDropdown">
                   <div class="language-option" id="option-tr" onclick="selectLanguage('tr')">
                    <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 356.18"><g fill-rule="nonzero"><path fill="#E30A17" d="M28.137 0H483.86C499.337 0 512 12.663 512 28.14v299.9c0 15.477-12.663 28.14-28.14 28.14H28.137C12.663 356.18 0 343.517 0 328.04V28.14C0 12.663 12.663 0 28.137 0z"/><path fill="#fff" d="M253.365 130.516c-15.783-24.923-43.598-41.473-75.281-41.473-49.179 0-89.047 39.868-89.047 89.047 0 49.179 39.868 89.047 89.047 89.047 31.684 0 59.498-16.55 75.282-41.475-13.042 14.526-31.963 23.665-53.021 23.665-39.342 0-71.237-31.893-71.237-71.237 0-39.344 31.895-71.237 71.237-71.237 21.058 0 39.978 9.138 53.02 23.663zm-4.785 47.574l80.543 26.169-49.778-68.514v84.688l49.778-68.514-80.543 26.171z"/></g></svg>
                    <span>T√ºrk√ße</span>
                  </div>
                  <div class="language-option" id="option-en" onclick="selectLanguage('en')">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55.2 38.4" style="enable-background:new 0 0 55.2 38.4" xml:space="preserve"><style type="text/css">.st0{fill:#FEFEFE;} .st1{fill:#C8102E;} .st2{fill:#012169;}</style><g><path class="st0" d="M2.87,38.4h49.46c1.59-0.09,2.87-1.42,2.87-3.03V3.03c0-1.66-1.35-3.02-3.01-3.03H3.01 C1.35,0.01,0,1.37,0,3.03v32.33C0,36.98,1.28,38.31,2.87,38.4L2.87,38.4z"/><polygon class="st1" points="23.74,23.03 23.74,38.4 31.42,38.4 31.42,23.03 55.2,23.03 55.2,15.35 31.42,15.35 31.42,0 23.74,0 23.74,15.35 0,15.35 0,23.03 23.74,23.03"/><path class="st2" d="M33.98,12.43V0h18.23c1.26,0.02,2.34,0.81,2.78,1.92L33.98,12.43L33.98,12.43z"/><path class="st2" d="M33.98,25.97V38.4h18.35c1.21-0.07,2.23-0.85,2.66-1.92L33.98,25.97L33.98,25.97z"/><path class="st2" d="M21.18,25.97V38.4H2.87c-1.21-0.07-2.24-0.85-2.66-1.94L21.18,25.97L21.18,25.97z"/><path class="st2" d="M21.18,12.43V0H2.99C1.73,0.02,0.64,0.82,0.21,1.94L21.18,12.43L21.18,12.43z"/><polygon class="st2" points="0,12.8 7.65,12.8 0,8.97 0,12.8"/><polygon class="st2" points="55.2,12.8 47.51,12.8 55.2,8.95 55.2,12.8"/><polygon class="st2" points="55.2,25.6 47.51,25.6 55.2,29.45 55.2,25.6"/><polygon class="st2" points="0,25.6 7.65,25.6 0,29.43 0,25.6"/><polygon class="st1" points="55.2,3.25 36.15,12.8 40.41,12.8 55.2,5.4 55.2,3.25"/><polygon class="st1" points="19.01,25.6 14.75,25.6 0,32.98 0,35.13 19.05,25.6 19.01,25.6"/><polygon class="st1" points="10.52,12.81 14.78,12.81 0,5.41 0,7.55 10.52,12.81"/><polygon class="st1" points="44.63,25.59 40.37,25.59 55.2,33.02 55.2,30.88 44.63,25.59"/></g></svg>
                    <span>English</span>
                  </div>
              </div>
            </div>
            
            <button id="logout" onclick="openLogoutModal()">Logout</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main">
      <div class="grid-container">
        <!-- Client & Task Info -->
        <div>
          <div class="form-group">
            <label for="clientNameInput">Client</label>
            <input type="text" class="form-control" id="clientNameInput" style="width: 90%" readonly />
          </div>
          <div class="form-group">
            <label for="project">Project</label>
            <select id="project" class="form-control" onchange="loadTasksForProject()" style="width: 90%"></select>
          </div>
          <div class="form-group">
            <label for="task">Task</label>
            <select id="task" class="form-control" style="width: 90%">
              <option disabled selected value="">-- Select a Task --</option>
            </select>
          </div>
        </div>

        <!-- Timer Block -->
    <!-- Timer Block -->
        <div class="container floating">
          
          <!-- Radial Menu Design (Exact FocusRO Style) -->
          <div class="radial-menu-container">
            <!-- Background half circle with light green gradient -->
            <div class="radial-bg-circle"></div>
            
            <!-- Center status circle -->
            <div class="radial-center-circle" id="radialCenterCircle">
              <span class="center-status-text">AT<br>WORK</span>
              
            </div>
            
            <!-- Activity icons positioned inside the segments -->
            <div class="activity-item item-break">
              
<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg height="100px" width="100px" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512"  xml:space="preserve">
<style type="text/css">
	.st0{fill:#000000;}
</style>
<g>
	<path class="st0" d="M0,366.061c0,37.182,34.805,67.33,77.738,67.33h329.528c42.937,0,77.741-30.149,77.741-67.33v-0.858H0V366.061
		z"/>
	<path class="st0" d="M488.282,114.821c-14.586-14.622-34.971-23.718-57.266-23.718c-2.389,0-8.81,0-16.257,0V78.609H67.339v115.411
		c0,56.908,25.096,107.902,64.782,142.663h217.852c26.276-23.013,46.092-53.161,56.527-87.422c7.751,2.46,15.995,3.818,24.516,3.811
		c22.294,0.007,42.679-9.098,57.266-23.719c14.622-14.59,23.731-34.975,23.718-57.265
		C512.012,149.797,502.908,129.412,488.282,114.821z M457.557,198.615c-6.866,6.842-16.106,11.003-26.541,11.003
		c-6.021,0-11.637-1.437-16.642-3.922c0.234-3.874,0.384-7.748,0.384-11.677v-59.464c7.447,0,13.868,0,16.257,0
		c10.435,0.024,19.675,4.159,26.541,11.002c6.826,6.858,10.983,16.098,10.99,26.529C468.54,182.517,464.384,191.773,457.557,198.615
		z"/>
    
</g>

</svg>
<span class="item-label" id="breakLabel">Break</span>
            </div>
            
            <div class="activity-item item-meeting" onclick="setRadialStatus('meeting')">
             
<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 width="100px" height="100px" viewBox="0 0 800 800" xml:space="preserve">
<g>
	<path d="M400.391,620.215c-165.02,0-331.602-32.691-389.286-95.595v146.181h355.301v63.943h-82.987V800H513.5v-65.256h-82.987
		v-63.943h358.382V525.314C730.604,587.761,564.76,620.215,400.391,620.215z M257.269,338.444
		c3.625-21.593,8.29-43.338,16.146-64.79c7.877-21.604,19.683-47.2,38.781-65.267c12.414-15.668,42.296-29.123,81.229-30.437
		l-18.143,152.333c-16.667,0.337-33.14,0.912-49.198,1.878c0.521-10.949,1.02-21.452,1.476-30.806
		c-3.342,10.156-5.838,20.638-8.072,31.294C298.11,334.061,277.298,335.971,257.269,338.444z M316.667,84.776
		C316.667,37.945,354.557,0,401.324,0c46.724,0,84.593,37.945,84.593,84.776c0,46.832-37.869,84.755-84.593,84.755
		C354.557,169.531,316.667,131.608,316.667,84.776z M181.854,213.716c21.788,15.787,32.899,41.124,39.345,58.8
		c1.172,3.233,1.866,6.694,2.93,9.972c-6.012,21.397-9.875,42.578-12.978,62.901c-6.944,1.215-13.846,2.463-20.551,3.809
		c-3.212-19.922-7.183-40.484-12.109-55.035c1.324,17.025,2.778,37.023,4.058,56.738c-13.563,2.854-26.693,5.914-39.106,9.3
		L127.97,197.408c10.743,0.737,21.181,2.452,30.274,5.306C166.208,204.829,174.259,208.225,181.854,213.716z M480.079,199.121
		c27.604,20.02,41.711,52.138,49.871,74.556c7.877,21.56,12.563,43.413,16.188,65.137c-20.03-2.539-40.843-4.515-62.24-5.968
		c-2.214-10.634-4.73-21.094-8.029-31.229c0.738,9.635,1.541,20.041,2.322,30.805c-16.972-1.074-34.332-1.758-51.977-2.127
		L411.783,178.44c13.629,0.934,26.845,3.114,38.39,6.717C460.244,187.848,470.466,192.155,480.079,199.121z M686.527,197.104
		l21.397,179.492c31.12,12.044,56.229,26.041,73.722,41.579c7.312-17.328,12.824-35.742,15.929-57.118
		c8.095-55.729-4.231-102.951-34.679-132.964c-10.981-10.84-21.877-17.491-32.685-21.756
		C718.689,201.118,703.693,197.689,686.527,197.104z M750.743,354.232c-1.692,11.762-4.297,22.33-7.553,32.335v-0.022
		c-0.087-1.172-0.392-2.278-0.607-3.418c-1.909-44.748-4.058-88.454-5.229-111.936C755.387,297.157,753.781,333.442,750.743,354.232
		z M613.545,123.492c0-36.958,29.883-66.884,66.754-66.884c36.895,0,66.798,29.926,66.798,66.884
		c0,36.957-29.903,66.873-66.798,66.873C643.428,190.365,613.545,160.449,613.545,123.492z M592.256,345.845
		c-3.407-22.136-7.748-45.421-14.758-68.87c0.499-1.453,0.781-3.005,1.303-4.459c6.445-17.676,17.558-43.013,39.346-58.8
		c7.596-5.491,15.646-8.887,23.61-11.003c9.093-2.854,19.532-4.568,30.274-5.306l-15.452,162.598
		c-12.436-3.364-25.543-6.424-39.106-9.267c1.26-19.662,2.713-39.605,4.037-56.576c-5.882,17.372-9.982,35.775-13.063,54.666
		C603.149,347.775,597.702,346.811,592.256,345.845z M52.903,123.492c0-36.958,29.905-66.884,66.798-66.884
		c36.871,0,66.754,29.926,66.754,66.884c0,36.957-29.883,66.873-66.754,66.873C82.809,190.365,52.903,160.449,52.903,123.492z
		 M18.571,418.729c17.361-15.625,42.34-29.72,73.482-41.839l21.419-179.785c-17.166,0.586-32.162,4.015-43.686,9.233
		c-10.808,4.265-21.702,10.916-32.661,21.756C6.656,258.105-5.669,305.328,2.424,361.057C5.55,382.65,11.127,401.248,18.571,418.729
		z M62.668,271.191c-1.172,23.481-3.342,67.188-5.252,111.936c-0.217,1.14-0.521,2.246-0.607,3.418v0.022
		c-3.255-10.005-5.859-20.573-7.552-32.335C46.22,333.442,44.613,297.157,62.668,271.191z M782.08,452.441
		c-33.507-57.053-191.496-100.282-381.689-100.282c-190.237,0-348.183,43.229-381.732,100.282
		c-4.297,7.323-6.814,14.854-6.814,22.559c0,67.828,173.917,122.819,388.546,122.819c214.413,0,388.243-54.904,388.503-122.688
		c0-0.044,0-0.087,0-0.131c0-0.043,0-0.087,0-0.13C788.852,467.198,786.334,459.723,782.08,452.441z"/>
</g>
</svg>
              <span class="item-label" id="meetingLabel">Meeting</span>
            </div>
            
            <div class="activity-item item-work" onclick="setRadialStatus('work')">
              
<?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="100px" height="100px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2 9C2 7.89543 2.89543 7 4 7H20C21.1046 7 22 7.89543 22 9V20C22 21.1046 21.1046 22 20 22H4C2.89543 22 2 21.1046 2 20V9Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M16 7V4C16 2.89543 15.1046 2 14 2H10C8.89543 2 8 2.89543 8 4V7" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M22 12H2" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7 12V14" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 12V14" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
              <span class="item-label" id="workLabel">Work</span>
            </div>
          </div>

          <div class="timer-display">
            <div class="timer-unit">
              <div class="timer-value" id="hours">00</div>
              <div class="timer-label">HRS</div>
            </div>
            <div class="timer-unit">
              <div class="timer-value" id="minutes">00</div>
              <div class="timer-label">MIN</div>
            </div>
            <div class="timer-unit">
              <div class="timer-value" id="seconds">00</div>
              <div class="timer-label">SEC</div>
            </div>
          </div>
<p id="statusText" style="text-align: center; color: #000; font-weight: bold; margin-top: 10px;"></p>

          <div class="action-buttons">
            <button class="action-button start-button" id="startBtn" style="color: #fff;">START</button>
        <!-- <button class="state-btn break" onclick="handleBreak()" id="breakBtn">‚òï Break</button> -->

            <button class="action-button reset-button" id="resetBtn" style="background-color: orange;">Finish</button>
          </div>
        </div>

        <!-- Misc Info -->
        <div>
          <div class="form-group">
            <label for="todayDate">Today</label>
            <input type="text" class="form-control" id="todayDate" disabled />
          </div>
          <div class="form-group">
            <label for="totaltimecount">Total Time Count</label>
            <div id="totaltimecount" class="form-control">00:00</div>
          </div>
          <div class="form-group">
            <label for="loggingInput">Screen Recording</label>
            <input type="text" class="form-control" id="loggingInput" value="NO" disabled />
          </div>
        </div>
      </div>

      <!-- Status Buttons -->
      <div class="controls">
    
      </div>

      <div id="work-animation" style="display: none; text-align: center; margin-top: 10px;">
        <img src="" alt="Working Animation" style="width: auto; border-radius: 8px; max-width: 250px;" />
        <p style="margin-top: 8px; font-weight: bold;">Welcome...</p>
      </div>
    </div>

    <!-- Navigation Menu -->
<div class="nav-container">
  <ul class="nav-menu">

    <li class="nav-item active">
      <a  class="" onclick="openInNewTab('https://crm.deluxebilisim.com/')">
<svg width="40px" height="40px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M23 9L19.8 12.1999L18 10.4M8 15C5.79086 15 4 16.7909 4 19V21H20V19C20 16.7909 18.2091 15 16 15H12M12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11C14.2091 11 16 9.20914 16 7C16 6.27143 15.8052 5.58835 15.4649 5" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
      
      </a>
    </li>

    <li class="nav-item">
      <a  class="" data-page="help">
<svg fill="#000000" width="40px" height="40px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm1 16h-2v-2h2v2zm.976-4.885c-.196.158-.385.309-.535.459-.408.407-.44.777-.441.793v.133h-2v-.167c0-.118.029-1.177 1.026-2.174.195-.195.437-.393.691-.599.734-.595 1.216-1.029 1.216-1.627a1.934 1.934 0 0 0-3.867.001h-2C8.066 7.765 9.831 6 12 6s3.934 1.765 3.934 3.934c0 1.597-1.179 2.55-1.958 3.181z"/></svg>
       
      </a>  
    </li>

    <li class="nav-item">
      <a class="" data-page="settings">
       <svg width="40px" height="40px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#000000" d="M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"/></svg>
      </a>
    </li>

    <li class="nav-item">
      <a onclick="openReviewModal()" class="" data-page="logout">
       <svg fill="#000000" width="40px" height="40px" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg">
    <path d="M84 0v1423.143h437.875V1920l621.235-496.857h692.39V0H84Zm109.469 109.464H1726.03V1313.57h-621.235l-473.452 378.746V1313.57H193.469V109.464Z" fill-rule="evenodd"/>
</svg>
        
      </a>
    </li>

  </ul>
</div>


  </div>

  <!-- Smooth Drawer -->
  <div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
  <div class="drawer" id="drawer">
    <div class="drawer-header">
      <figure style="display: flex; align-items: center; justify-content: center;">
        <img src="./static/dds-logo.png" alt="Logo" class="drawer-logo" width="250px">
       
      </figure>
      <!-- <button class="drawer-close" onclick="closeDrawer()" aria-label="Close menu">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button> -->
    </div>
    
    <div class="drawer-content">
      <div class="drawer-section">
        <div class="drawer-item project-info">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2z"/>
          </svg>
          <div class="project-details">
            <div class="project-name" id="drawerProjectName">Proje Se√ßilmedi</div>
            <div class="project-client" id="drawerClientName">L√ºtfen bir proje se√ßin</div>
          </div>
        </div>
      </div>

      <div class="drawer-section">
  
        <div class="drawer-item task-info">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"/>
          </svg>
          <div class="task-details">
            <div class="task-name" id="drawerTaskName">No Task Selected</div>
            <div class="task-status" id="drawerTaskStatus">L√ºtfen √ßalƒ±≈ümaya ba≈ülamak i√ßin bir g√∂rev se√ßin</div>
          </div>
        </div>
      </div>

      <div class="drawer-section">
    
        <div class="drawer-item time-info">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12.5,7H11V12.5L15.75,15.85L16.5,14.6L12.5,11.75V7Z"/>
          </svg>
          <div class="time-details">
            <div class="current-time" id="drawerCurrentTime">00:00:00</div>
            <div class="total-time" id="drawerTotalTime">Toplam: 00:00</div>
          </div>
        </div>
      </div>

  
    </div>
  </div>

  <!-- For Logout Modal  -->
  <div id="logoutModal" class="modal">
    <div class="modal-content">
      <h2 id="logoutModalTitle" data-translatable="logoutTitle">üîí Confirm Logout</h2>
      <p id="logoutModalDesc" data-translatable="logoutDesc">Are you sure you want to log out from DDS-FocusPro?</p>
      <div class="modal-buttons">
        <button class="modal-btn cancel-btn" onclick="closeLogoutModal()" data-translatable="logoutCancel">Cancel</button>
        <button class="modal-btn submit-btn" onclick="confirmLogout()" data-translatable="logoutConfirm">Logout</button>
      </div>
    </div>
  </div>

  <!-- Configuration Panel Modal -->
  <div id="configModal" class="modal">
    <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
      <h2>‚öôÔ∏è Configuration Settings</h2>
      <div style="text-align: left;">
        
        <!-- API Source Info -->
        <div class="config-section">
          <h3>üì° Configuration Source</h3>
          <p id="config-source-info">Loading...</p>
          <button onclick="refreshConfiguration()" class="modal-btn" style="margin-top: 10px;">
            üîÑ Refresh from API
          </button>
        </div>

        <!-- UI Settings -->
        <div class="config-section">
          <h3>üé® UI Settings</h3>
          <div class="config-row">
            <label>Primary Color:</label>
            <input type="color" id="config-primary-color" disabled>
            <span id="config-primary-color-value">#006039</span>
          </div>
          <div class="config-row">
            <label>Font Size:</label>
            <select id="config-font-size" disabled>
              <option value="small">Small</option>
              <option value="medium">Medium</option>
              <option value="large">Large</option>
              <option value="extra_large">Extra Large</option>
            </select>
          </div>
        </div>

        <!-- Screenshot Settings -->
        <div class="config-section">
          <h3>üì∏ Screenshot Settings</h3>
          <div class="config-row">
            <label>Capture Interval:</label>
            <span id="config-screenshot-interval">60</span> seconds
          </div>
          <div class="config-row">
            <label>Quality:</label>
            <span id="config-screenshot-quality">85</span>%
          </div>
        </div>

        <!-- Features -->
        <div class="config-section">
          <h3>‚ú® Features</h3>
          <div class="config-row">
            <label>
              <input type="checkbox" id="feature-ai-analysis" disabled>
              AI Analysis
            </label>
          </div>
          <div class="config-row">
            <label>
              <input type="checkbox" id="feature-auto-categorization" disabled>
              Auto Categorization
            </label>
          </div>
          <div class="config-row">
            <label>
              <input type="checkbox" id="feature-idle-detection" disabled>
              Idle Detection
            </label>
          </div>
        </div>

      </div>
      <div class="modal-buttons">
        <button class="modal-btn cancel-btn" onclick="closeConfigModal()">Close</button>
      </div>
    </div>
  </div>

  <style>
    .config-section {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #f9f9f9;
    }
    .config-section h3 {
      margin-top: 0;
      color: var(--primary-color);
    }
    .config-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      padding: 5px 0;
    }
    .config-row label {
      font-weight: 500;
      flex: 1;
    }
    .config-row input, .config-row select {
      max-width: 150px;
    }
    #config-source-info {
      padding: 10px;
      background: #e8f5e8;
      border-radius: 5px;
      font-family: monospace;
      font-size: 12px;
    }
  </style>

   <!-- Logout Confirmation Modal -->
<!-- Idle Timeout Modal -->
<!-- Idle Timeout Modal -->
<!-- <div id="idleModal" class="modal">
  <div class="modal-content idle-shake" style="text-align: center;">
    <h2 id="idleModalTitle">‚è∏Ô∏è You're Idle</h2>
    <p id="idleModalDesc">You‚Äôve been inactive. Timer is paused.</p>
    
    <p id="idleCountdownText" style="font-size: 22px; font-weight: bold; color: #e67e22; margin-top: 10px;">
      Auto-saving in <span id="idleCounter">10</span> seconds...
    </p>

    <button onclick="cancelIdleCountdown()" 
            style="margin-top: 20px; padding: 10px 20px; font-size: 16px; font-weight: bold; background-color: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">
      ‚ùå Cancel & Resume Work
    </button>
  </div>
</div> -->



<!-- For Idle Modal  -->
<div id="idleModal" class="modal" onclick="closeIdleModal()">
  <div class="modal-content idle-shake">
    <h2 id="idleModalTitle" data-translatable="idleTitle">‚è∏Ô∏è You're Idle</h2>
    <p id="idleModalDesc" data-translatable="idleDesc">You‚Äôve been inactive. Timer is paused.</p>
  </div>
</div>


  <!-- Modals -->
  <div id="finishModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">√ó</span>
      <h2 id="modalTitle">üìù Task Completion</h2>
      <p id="modalDesc">Please describe what you have completed for this task:</p>
      <textarea id="taskDetailInput" placeholder="Type your task details here..." rows="5"></textarea>
      <div class="modal-buttons">
        <button id="modalSubmitBtn" class="modal-btn submit-btn" onclick="submitTaskDetails()">Submit</button>
      </div>
    </div>
  </div>

  <div id="reviewModal" class="modal-review">
    <div class="modal-content">
      <span class="modal-close" onclick="closeReviewModal()">√ó</span>
      <h2 id="reviewModalTitle">üí¨ Share Your Feedback</h2>
      <p id="reviewModalDesc">We'd love to hear your thoughts about DDSFocusPro:</p>
      <textarea id="reviewInput" placeholder="Type your feedback here..." rows="5"></textarea>
      <div class="modal-buttons">
        <button id="reviewSubmitBtn" class="modal-btn submit-btn" onclick="submitUserReview()">Submit Review</button>
      </div>
    </div>
  </div>

  <!-- Loader -->
  <div id="syncLoader" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.4); z-index: 9999; justify-content: center; align-items: center;">
    <div style="padding: 20px; background: white; border-radius: 8px; font-weight: bold;">
      üîÑ Syncing timesheets...Please wait
    </div>
  </div>

  <!-- External Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <!-- Configuration Manager removed - API functionality disabled -->
  <script>
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            const button = document.querySelector('.language-btn');
            
            dropdown.classList.toggle('show');
            button.classList.toggle('active');
        }

// ====== SMOOTH DRAWER FUNCTIONS ======
function toggleDrawer() {
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawerOverlay');
    const arrowBtn = document.getElementById('drawerArrowBtn');
    
    if (drawer.classList.contains('active')) {
        closeDrawer();
    } else {
        openDrawer();
    }
}

function openDrawer() {
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawerOverlay');
    const arrowBtn = document.getElementById('drawerArrowBtn');
    
    drawer.classList.add('active');
    overlay.classList.add('active');
    arrowBtn.classList.add('active');
    
    // Prevent body scroll when drawer is open
    document.body.style.overflow = 'hidden';
    
    // Add staggered animation to drawer sections
    const sections = document.querySelectorAll('.drawer-section');
    sections.forEach((section, index) => {
        section.style.animationDelay = `${0.1 + (index * 0.1)}s`;
        section.style.animation = 'slideInFromLeft 0.4s ease-out forwards';
    });
}

function closeDrawer() {
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawerOverlay');
    const arrowBtn = document.getElementById('drawerArrowBtn');
    
    drawer.classList.remove('active');
    overlay.classList.remove('active');
    arrowBtn.classList.remove('active');
    
    // Restore body scroll
    document.body.style.overflow = '';
    
    // Reset animations
    const sections = document.querySelectorAll('.drawer-section');
    sections.forEach((section) => {
        section.style.animation = '';
        section.style.animationDelay = '';
    });
}

// Helper functions for drawer actions
function showHelp() {
    closeDrawer();
    // Add help functionality here
    console.log('Help requested');
}

function openSettings() {
    closeDrawer();
    // Add settings functionality here
    console.log('Settings opened');
}

function showAbout() {
    closeDrawer();
    // Add about functionality here
    alert('DDS FocusPro v1.3\\n\\nA professional time tracking application for enhanced productivity.');
}

// ====== DRAWER INFO UPDATE FUNCTIONS ======
function updateDrawerProjectInfo() {
    const projectSelect = document.getElementById('project');
    const clientInput = document.getElementById('clientNameInput');
    const drawerProjectName = document.getElementById('drawerProjectName');
    const drawerClientName = document.getElementById('drawerClientName');
    
    if (projectSelect && projectSelect.selectedOptions.length > 0) {
        const selectedProject = projectSelect.selectedOptions[0].text;
        const clientName = clientInput ? clientInput.value : 'Unknown Client';
        
        // Get current language for translations
        const currentLang = sessionStorage.getItem('selectedLanguage') || 'tr';
        const translation = clientTranslations[currentLang] || clientTranslations.en;
        
        drawerProjectName.textContent = selectedProject !== translation.selectProject ? selectedProject : translation.noProjectSelected;
        drawerClientName.textContent = clientName || translation.pleaseSelectProject;
    } else {
        // Get current language for translations
        const currentLang = sessionStorage.getItem('selectedLanguage') || 'tr';
        const translation = clientTranslations[currentLang] || clientTranslations.en;
        
        drawerProjectName.textContent = translation.noProjectSelected;
        drawerClientName.textContent = translation.pleaseSelectProject;
    }
}

function updateDrawerTaskInfo() {
    const taskSelect = document.getElementById('task');
    const drawerTaskName = document.getElementById('drawerTaskName');
    const drawerTaskStatus = document.getElementById('drawerTaskStatus');
    const stateLabel = document.getElementById('stateLabel');
    
    // Get current language for translations
    const currentLang = sessionStorage.getItem('selectedLanguage') || 'tr';
    const translation = clientTranslations[currentLang] || clientTranslations.en;
    
    if (taskSelect && taskSelect.selectedOptions.length > 0) {
        const selectedTask = taskSelect.selectedOptions[0].text;
        const currentState = stateLabel ? stateLabel.textContent : 'IDLE';
        
        drawerTaskName.textContent = selectedTask !== translation.selectTask ? selectedTask : 'No Task Selected';
        drawerTaskStatus.textContent = selectedTask !== translation.selectTask ? `${translation.status} ${currentState}` : translation.pleaseSelectTask;
    } else {
        drawerTaskName.textContent = 'No Task Selected';
        drawerTaskStatus.textContent = translation.pleaseSelectTask;
    }
}

function updateDrawerTimeInfo() {
    const hoursElement = document.getElementById('hours');
    const minutesElement = document.getElementById('minutes');
    const secondsElement = document.getElementById('seconds');
    const totalTimeElement = document.getElementById('totaltimecount');
    
    const drawerCurrentTime = document.getElementById('drawerCurrentTime');
    const drawerTotalTime = document.getElementById('drawerTotalTime');
    
    if (hoursElement && minutesElement && secondsElement) {
        const hours = hoursElement.textContent || '00';
        const minutes = minutesElement.textContent || '00';
        const seconds = secondsElement.textContent || '00';
        
        drawerCurrentTime.textContent = `${hours}:${minutes}:${seconds}`;
    }
    
    if (totalTimeElement) {
        const totalTime = totalTimeElement.textContent || '00:00';
        // Get current language for translations
        const currentLang = sessionStorage.getItem('selectedLanguage') || 'tr';
        const translation = clientTranslations[currentLang] || clientTranslations.en;
        drawerTotalTime.textContent = `${translation.total} ${totalTime}`;
    }
}

// Auto-update drawer info every second
setInterval(function() {
    updateDrawerTimeInfo();
    updateDrawerTaskInfo(); // Update task status in case state changes
}, 1000);

// Update drawer info when dropdowns change
document.addEventListener('DOMContentLoaded', function() {
    const projectSelect = document.getElementById('project');
    const taskSelect = document.getElementById('task');
    
    if (projectSelect) {
        projectSelect.addEventListener('change', updateDrawerProjectInfo);
    }
    
    if (taskSelect) {
        taskSelect.addEventListener('change', updateDrawerTaskInfo);
    }
    
    // Initial update
    setTimeout(function() {
        updateDrawerProjectInfo();
        updateDrawerTaskInfo();
        updateDrawerTimeInfo();
    }, 500);
});

// Configuration Modal Functions
function openConfigModal() {
    const modal = document.getElementById('configModal');
    modal.style.display = 'flex';
    // Trigger animation after display is set
    setTimeout(() => {
      modal.classList.remove('hide');
      modal.classList.add('show');
    }, 10);
    updateConfigDisplay();
}

function closeConfigModal() {
    const modal = document.getElementById('configModal');
    modal.classList.remove('show');
    modal.classList.add('hide');
    
    // Hide modal after animation completes
    setTimeout(() => {
      modal.style.display = 'none';
      modal.classList.remove('hide');
    }, 300);
}

function updateConfigDisplay() {
    // ConfigManager API disabled - using static configuration
    console.log('‚ö†Ô∏è ConfigManager API disabled - using default settings');
    
    // Update source info with static values
    document.getElementById('config-source-info').innerHTML = `
        <strong>Theme:</strong> Default<br>
        <strong>Version:</strong> 1.4<br>
        <strong>Source:</strong> Static Configuration<br>
        <strong>Status:</strong> API Disabled
    `;
    
    // Set default values for other config displays if they exist
    const elements = {
        'config-font-size': '14px',
        'config-font-family': 'Segoe UI, sans-serif',
        'config-screenshot-interval': '60 seconds',
        'config-screenshot-quality': '85%',
        'config-ai-analysis': 'Enabled',
        'config-idle-detection': 'Enabled'
    };
    
    Object.entries(elements).forEach(([id, value]) => {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = value;
        }
    });
}

async function refreshConfiguration() {
    try {
        console.log('üîÑ Configuration refresh requested - API disabled');
        const refreshBtn = event.target;
        refreshBtn.textContent = '‚ö†Ô∏è API Disabled';
        refreshBtn.disabled = true;

        setTimeout(() => {
            refreshBtn.textContent = '‚ùå API Disabled';
            refreshBtn.disabled = true;
        }, 1000);

        console.log('‚ö†Ô∏è ConfigManager API disabled - no refresh available');
    } catch (error) {
        console.error('‚ùå Configuration refresh error:', error);
    }
}

// Close drawer when clicking outside
document.addEventListener('click', function(event) {
    const drawer = document.getElementById('drawer');
    const arrowBtn = document.getElementById('drawerArrowBtn');
    
    if (drawer && drawer.classList.contains('active')) {
        if (!drawer.contains(event.target) && !arrowBtn.contains(event.target)) {
            closeDrawer();
        }
    }
});

// Close drawer with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const drawer = document.getElementById('drawer');
        if (drawer && drawer.classList.contains('active')) {
            closeDrawer();
        }
    }
});

function selectLanguage(langCode) {
    const currentLanguage = document.getElementById('currentLanguage');

    // Define flag paths and labels
    const flags = {
        en: '/static/images/uk-flag.svg',
        tr: '/static/images/turkish-flag.svg'
    };

    const labels = {
        en: 'English',
        tr: 'T√ºrk√ße'
    };

    // Fallback to Turkish if langCode is invalid
    if (!flags[langCode]) langCode = 'tr';

    // ‚ú® Fade-out before changing content
    currentLanguage.style.opacity = 0;

    setTimeout(() => {
        // Update flag + label
        currentLanguage.innerHTML = `
            <span class="language-flag" style="background-image: url('${flags[langCode]}');"></span>
            ${labels[langCode]}
        `;

        // ‚ú® Fade-in after update
        currentLanguage.style.opacity = 1;
    }, 200); // match CSS transition duration

    // Save and apply language
    sessionStorage.setItem('selectedLanguage', langCode);
    applyClientLanguage(langCode);

    // Close dropdown
    document.getElementById('languageDropdown')?.classList.remove('show');
    document.querySelector('.language-btn')?.classList.remove('active');

    // Highlight selection
    document.getElementById('option-tr')?.classList.remove('selected');
    document.getElementById('option-en')?.classList.remove('selected');
    document.getElementById(`option-${langCode}`)?.classList.add('selected');
}

// Translation system for the client interface
const clientTranslations = {
    tr: {
        noProjectSelected: "Proje Se√ßilmedi",
        pleaseSelectProject: "L√ºtfen bir proje se√ßin",
        selectProject: "-- Proje Se√ßin --",
        selectTask: "-- ƒ∞≈ü Emri Se√ßin --",
        language: "Dil",
        status: "Durum:",
        total: "Toplam:",
        pleaseSelectTask: "L√ºtfen √ßalƒ±≈ümaya ba≈ülamak i√ßin bir g√∂rev se√ßin"
    },
    en: {
        noProjectSelected: "No Project Selected",
        pleaseSelectProject: "Please select a project", 
        selectProject: "-- Select a Project --",
        selectTask: "-- Select a Task --",
        language: "Language",
        status: "Status:",
        total: "Total:",
        pleaseSelectTask: "Please select a task to start working"
    }
};

function applyClientLanguage(langCode) {
    const translation = clientTranslations[langCode] || clientTranslations.tr;
    
    // Update drawer project elements
    const drawerProjectName = document.getElementById('drawerProjectName');
    const drawerClientName = document.getElementById('drawerClientName');
    const drawerTaskStatus = document.getElementById('drawerTaskStatus');
    const drawerTotalTime = document.getElementById('drawerTotalTime');
    
    // Check if they currently have default text and update them
    if (drawerProjectName && (drawerProjectName.textContent === 'No Project Selected' || 
                             drawerProjectName.textContent === 'Proje Se√ßilmedi')) {
        drawerProjectName.textContent = translation.noProjectSelected;
    }
    
    if (drawerClientName && (drawerClientName.textContent === 'Please select a project' || 
                            drawerClientName.textContent === 'L√ºtfen bir proje se√ßin')) {
        drawerClientName.textContent = translation.pleaseSelectProject;
    }
    
    // Update task status text
    if (drawerTaskStatus && (drawerTaskStatus.textContent === 'Please select a task to start working' || 
                            drawerTaskStatus.textContent === 'L√ºtfen √ßalƒ±≈ümaya ba≈ülamak i√ßin bir g√∂rev se√ßin')) {
        drawerTaskStatus.textContent = translation.pleaseSelectTask;
    }
    
    // Update total time text if it contains "Total:" or "Toplam:"
    if (drawerTotalTime) {
        const currentText = drawerTotalTime.textContent;
        if (currentText.startsWith('Total:') || currentText.startsWith('Toplam:')) {
            const timeValue = currentText.split(': ')[1] || '00:00';
            drawerTotalTime.textContent = `${translation.total} ${timeValue}`;
        }
    }
    
    // Update language button text if it shows default text
    const currentLanguage = document.getElementById('currentLanguage');
    if (currentLanguage && (currentLanguage.textContent === 'Language' || 
                           currentLanguage.textContent === 'Dil')) {
        // Don't change the language button text as it shows flags + text, handled in selectLanguage function
    }
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
    const savedLanguage = sessionStorage.getItem('selectedLanguage') || 'tr';
    selectLanguage(savedLanguage);
});

        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.language-btn') && !event.target.closest('.language-dropdown')) {
                const dropdown = document.getElementById('languageDropdown');
                const button = document.querySelector('.language-btn');
                if (dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                    button.classList.remove('active');
                }
            }
        }

    </script>
  
  <!-- Main Application Scripts -->
  <script src="../static/script/client.js"></script>
</body>

</html>
