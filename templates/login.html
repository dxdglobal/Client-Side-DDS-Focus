<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-          console.log('📦 Using apiData.data structure');cale=1.0">
  <title>FocusRO - Login</title>
  <link rel="stylesheet" href="./static/login.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bcryptjs@2.4.3/dist/bcrypt.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body onload="checkDatabase()">

  <div class="container">
    <div class="window-header">
      <!-- <div class="window-title">
        <span>FocusRO</span>
      </div> -->
      <div class="window-controls">
        <div class="window-button minimize">−</div>
        <div class="window-button maximize">□</div>
        <div class="window-button close">×</div>
      </div>
    </div>

    <div class="wave-bg"></div>

    <div class="logo">
      <img src="./static/logo.webp" alt="DDS Logo" width="340px" height="auto">
    </div>

    <div class="content">
      <div class="title">Automated Employee Monitoring Software</div>
      <div class="subtitle">Machine learning-based productivity & distraction detection</div>

      <div class="login-form">
        <input type="text" class="input-field" placeholder="Username or Email" id="username" autocomplete="username" />
        <input type="password" class="input-field" placeholder="Password" id="password"
          autocomplete="current-password" />
     



        <div class="checkbox-container">
             <div class="input-group">
  <input type="checkbox" id="rememberMe" />
  <label for="rememberMe" id="rememberMeLabel">Remember Me</label>
</div>
          <!-- <label class="save-password">
            <input type="checkbox" id="savePassword" /> 
            <span>Save Password</span>
          </label> -->
          <!-- <a href="https://crm.deluxebilisim.com/admin/authentication/forgot_password" class="forgot-password">Forgot Password?</a> -->
       <a href="https://crm.deluxebilisim.com/admin/authentication/forgot_password" 
   target="_blank" 
   rel="noopener noreferrer" 
   class="forgot-password">
   Forgot Password?
</a>
        </div>

        <button class="login-button" id="loginBtn" onclick="handleLogin()">LOGIN</button>
        

        <!-- <button class="guest-button" onclick="guestLogin()">Login as Guest</button> -->
      </div>
    </div>


    <div class="language-selector">
      <select id="languageSelector" onchange="changeLanguage()">
        <option value="en">English</option>
        <option value="tr">Turkish</option>
      </select>
    </div>

    <div class="version">DeluxeTime v1.3</div>
  </div>

  <!-- Staff Data Display -->
  <div class="staff-data">
    <h3>Staff Data:</h3>
    <ul id="staffList"></ul>
  </div>

  
  <!-- Scripts Section -->
  <script src="./static/script/config-manager.js"></script>
  <script src="./static/script/login.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

  <script>
    // 🎨 BUTTON COLOR API INTEGRATION (CORS Fixed)
    async function loadButtonColorFromAPI() {
      try {
        console.log('🎨 Loading ALL colors from DDS API via proxy...');
        
        // Use local proxy endpoint to avoid CORS issues
        const response = await fetch('/api/styling/proxy', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        });

        if (!response.ok) {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }

        const proxyData = await response.json();
        console.log('🎨 Proxy Response:', proxyData);
        
        if (!proxyData.success) {
          throw new Error(`Proxy error: ${proxyData.error}`);
        }
        
        const apiData = proxyData.data;
        console.log('🎨 API Data from proxy:', apiData);
        
        // Handle different API response structures
        let apiColors = null;
        
        if (apiData.status === 'success' && apiData.data) {
          // Structure: {status: "success", data: {colors...}}
          apiColors = apiData.data;
          console.log('� Using data.data structure');
        } else if (apiData.button_color !== undefined) {
          // Structure: {button_color: "#ff0000", ...}
          apiColors = apiData;
          console.log('📦 Using direct apiData structure');
        } else if (apiData.colors) {
          // Structure: {colors: {button_color: "#ff0000", ...}}
          apiColors = apiData.colors;
          console.log('📦 Using apiData.colors structure');
        } else if (apiData.styling) {
          // Structure: {styling: {button_color: "#ff0000", ...}}
          apiColors = apiData.styling;
          console.log('📦 Using apiData.styling structure');
        } else {
          console.error('❌ Unknown API response structure:', apiData);
          throw new Error('Cannot find color data in API response');
        }
        
        console.log('🔘 Extracted API colors:', apiColors);
        console.log('🔍 Button color value:', apiColors.button_color);
        console.log('🔍 Button color type:', typeof apiColors.button_color);
        console.log('Primary:', apiColors.primary_color);
        console.log('Secondary:', apiColors.secondary_color);
        console.log('Background:', apiColors.background_color);
        console.log('Button xxxx:', apiColors.button_color);
        console.log('Text:', apiColors.text_color);
        
        // Check if button_color exists and is valid
        if (!apiColors.button_color || apiColors.button_color === 'undefined' || apiColors.button_color === '') {
          console.error('❌ button_color is invalid:', apiColors.button_color);
          throw new Error(`button_color is invalid: ${apiColors.button_color}`);
        }
        
        // Apply ALL colors to CSS variables with !important
        const root = document.documentElement;
        
        // Primary colors
        if (apiColors.primary_color) {
          root.style.setProperty('--primary-color', apiColors.primary_color, 'important');
          root.style.setProperty('--primary-hover', darkenColor(apiColors.primary_color, 10), 'important');
          root.style.setProperty('--primary-active', darkenColor(apiColors.primary_color, 20), 'important');
          root.style.setProperty('--primary-light', lightenColor(apiColors.primary_color, 40), 'important');
          root.style.setProperty('--primary-dark', darkenColor(apiColors.primary_color, 30), 'important');
        }
        
        // Secondary colors
        if (apiColors.secondary_color) {
          root.style.setProperty('--secondary-color', apiColors.secondary_color, 'important');
          root.style.setProperty('--secondary-hover', darkenColor(apiColors.secondary_color, 10), 'important');
          root.style.setProperty('--secondary-active', darkenColor(apiColors.secondary_color, 20), 'important');
          root.style.setProperty('--secondary-light', lightenColor(apiColors.secondary_color, 40), 'important');
          root.style.setProperty('--secondary-dark', darkenColor(apiColors.secondary_color, 30), 'important');
          root.style.setProperty('--success-color', apiColors.secondary_color, 'important');
        }
        
        // Background colors
        if (apiColors.background_color) {
          root.style.setProperty('--background-color', apiColors.background_color, 'important');
          root.style.setProperty('--background-hover', darkenColor(apiColors.background_color, 5), 'important');
          root.style.setProperty('--background-active', darkenColor(apiColors.background_color, 10), 'important');
          root.style.setProperty('--background-light', lightenColor(apiColors.background_color, 20), 'important');
          root.style.setProperty('--background-dark', darkenColor(apiColors.background_color, 15), 'important');
          
          // Apply to body immediately
          document.body.style.setProperty('background-color', apiColors.background_color, 'important');
        }
        
        // 🔴 BUTTON COLORS - MAIN FOCUS!
        if (apiColors.button_color) {
          console.log('🔴 Applying button color:', apiColors.button_color);
          root.style.setProperty('--button-color', apiColors.button_color, 'important');
          root.style.setProperty('--button-hover', darkenColor(apiColors.button_color, 10), 'important');
          root.style.setProperty('--button-active', darkenColor(apiColors.button_color, 20), 'important');
          root.style.setProperty('--button-light', lightenColor(apiColors.button_color, 40), 'important');
          root.style.setProperty('--button-dark', darkenColor(apiColors.button_color, 30), 'important');
          root.style.setProperty('--warning-color', apiColors.button_color, 'important');
          
          // 🎯 Apply directly to login button with multiple selectors
          const loginSelectors = ['#loginBtn', '.login-button', 'button[type="submit"]', '.btn-primary'];
          loginSelectors.forEach(selector => {
            const button = document.querySelector(selector);
            if (button) {
              button.style.setProperty('background-color', apiColors.button_color, 'important');
              button.style.setProperty('border-color', apiColors.button_color, 'important');
              button.style.setProperty('background', `linear-gradient(145deg, ${apiColors.button_color}, ${darkenColor(apiColors.button_color, 15)})`, 'important');
              console.log(`🔴 Applied API color to ${selector}: ${apiColors.button_color}`);
            }
          });
          
          // 🔴 SPECIFIC FIX for .login-button class (user's request)
          const loginButtonElements = document.querySelectorAll('.login-button');
          if (loginButtonElements.length > 0) {
            loginButtonElements.forEach((button, index) => {
              button.style.setProperty('background-color', apiColors.button_color, 'important');
              button.style.setProperty('border-color', apiColors.button_color, 'important');
              button.style.setProperty('background', `linear-gradient(145deg, ${apiColors.button_color}, ${darkenColor(apiColors.button_color, 15)})`, 'important');
              console.log(`🔴 Applied API color to .login-button element ${index + 1}: ${apiColors.button_color}`);
            });
            console.log(`✅ Successfully applied API color to ${loginButtonElements.length} .login-button elements`);
          } else {
            console.warn('⚠️ No .login-button elements found in DOM');
          }
        }
        
        // Text colors
        if (apiColors.text_color) {
          root.style.setProperty('--text-color', apiColors.text_color, 'important');
          root.style.setProperty('--text-hover', lightenColor(apiColors.text_color, 10), 'important');
          root.style.setProperty('--text-active', darkenColor(apiColors.text_color, 10), 'important');
          root.style.setProperty('--text-light', lightenColor(apiColors.text_color, 30), 'important');
          root.style.setProperty('--text-dark', darkenColor(apiColors.text_color, 20), 'important');
          
          // Apply to body immediately
          document.body.style.setProperty('color', apiColors.text_color, 'important');
          
          // 🔤 Apply text color to Remember Me label specifically
          const rememberMeLabel = document.getElementById('rememberMeLabel');
          if (rememberMeLabel) {
            rememberMeLabel.style.setProperty('color', apiColors.text_color, 'important');
            console.log('🔤 Applied API text color to Remember Me label:', apiColors.text_color);
          }
        }
        
        // Additional derived colors
        if (apiColors.primary_color) {
          root.style.setProperty('--border-color', lightenColor(apiColors.primary_color, 60), 'important');
        }
        
        // Apply to all buttons as comprehensive fallback
        const allButtons = document.querySelectorAll('button, .login-button, .btn, input[type="submit"]');
        allButtons.forEach(button => {
          if (apiColors.button_color) {
            button.style.setProperty('background-color', apiColors.button_color, 'important');
            button.style.setProperty('border-color', apiColors.button_color, 'important');
          }
        });
        
        // 🎨 APPLY PRIMARY COLOR TO HEADER AND FOOTER
        if (apiColors.primary_color) {
          // Header - window-header uses primary color background
          const header = document.querySelector('.window-header');
          if (header) {
            header.style.setProperty('background-color', apiColors.primary_color, 'important');
            header.style.setProperty('border-bottom-color', darkenColor(apiColors.primary_color, 30), 'important');
            header.style.setProperty('color', lightenColor(apiColors.background_color || '#ffffff', 80), 'important');
            console.log('🎨 Applied primary color to header:', apiColors.primary_color);
          }
          
          // Footer - version uses primary color text
          const footer = document.querySelector('.version');
          if (footer) {
            footer.style.setProperty('color', apiColors.primary_color, 'important');
            console.log('🎨 Applied primary color to footer:', apiColors.primary_color);
          }
        }
        
        // 🎨 SET SYSTEM COLORS FROM API (no hardcoded values)
        if (apiColors.background_color) {
          // White = lighten background significantly
          root.style.setProperty('--white', lightenColor(apiColors.background_color, 80), 'important');
          // Black = darken text color significantly  
          root.style.setProperty('--black', darkenColor(apiColors.text_color || apiColors.primary_color, 90), 'important');
        }
        
        console.log(`✅ Applied API colors to ${allButtons.length} buttons`);
        console.log('✅ ALL API colors applied successfully!');
        console.log('🔴 Button color should now be:', apiColors.button_color);
        console.log('🎨 System colors derived from API - NO hardcoded values');
        
        return apiColors;
        
      } catch (error) {
        console.error('❌ Failed to load colors from API:', error);
        console.log('⚠️ API failed - NO FALLBACK COLORS (as requested)');
        
        // NO hardcoded fallback colors - purely API dependent
        console.log('🚫 No static colors will be applied');
        console.log('🔄 System will retry API in 3 seconds...');
        
        // Retry API after 3 seconds
        setTimeout(() => {
          console.log('🔄 Retrying API...');
          loadButtonColorFromAPI();
        }, 3000);
      }
    }
    
    // Utility function to darken color
    function darkenColor(color, percent) {
      const num = parseInt(color.replace("#", ""), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) - amt;
      const G = (num >> 8 & 0x00FF) - amt;
      const B = (num & 0x0000FF) - amt;
      return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
          (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
          (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
    }
    
    // Utility function to lighten color
    function lightenColor(color, percent) {
      const num = parseInt(color.replace("#", ""), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) + amt;
      const G = (num >> 8 & 0x00FF) + amt;
      const B = (num & 0x0000FF) + amt;
      return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
          (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
          (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
    }

    // Load button color as soon as DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('🔄 DOM Content Loaded - Loading button color...');
      loadButtonColorFromAPI();
      
      // Also test API manually
      testAPIDirectly();
    });

    // Also load after a short delay to ensure everything is ready
    setTimeout(() => {
      console.log('🔄 Delayed load - Ensuring button color is applied...');
      loadButtonColorFromAPI();
    }, 1000);
    
    // Manual API test function
    async function testAPIDirectly() {
      console.log('🧪 Manual API Test Starting...');
      
      try {
        const response = await fetch('https://dxdtime.ddsolutions.io/api/styling/global/');
        console.log('📡 API Response Status:', response.status);
        console.log('📡 API Response OK:', response.ok);
        
        if (response.ok) {
          const data = await response.json();
          console.log('📦 API Data Received:', data);
          
          // Check for button_color in different locations
          let buttonColor = null;
          if (data.button_color) {
            buttonColor = data.button_color;
            console.log('✅ Found button_color directly:', buttonColor);
          } else if (data.data && data.data.button_color) {
            buttonColor = data.data.button_color;
            console.log('✅ Found button_color in data.data:', buttonColor);
          } else {
            console.log('❌ button_color not found in API response');
            console.log('🔍 Available keys:', Object.keys(data));
          }
          
          // Force apply color if found
          if (buttonColor) {
            document.documentElement.style.setProperty('--button-color', buttonColor, 'important');
            console.log('🎨 Manually applied button color:', buttonColor);
            
            // Apply directly to button
            const button = document.querySelector('.login-button');
            if (button) {
              button.style.setProperty('background-color', buttonColor, 'important');
              console.log('🔴 Applied color directly to button element');
            }
          }
        } else {
          console.log('❌ API request failed:', response.status, response.statusText);
        }
      } catch (error) {
        console.log('❌ API test error:', error);
      }
    }

    // 🧪 DEBUG FUNCTIONS - You can call these from browser console
    window.testButtonColor = loadButtonColorFromAPI;
    window.forceRedButton = function() {
      console.log('� DISABLED - No hardcoded colors allowed');
      console.log('🔄 Use testButtonColor() to reload from API instead');
      loadButtonColorFromAPI();
    };
    
    window.testAllAPIColors = function() {
      console.log('🧪 Testing all API colors...');
      loadButtonColorFromAPI();
    };
    
    window.testLoginButton = function() {
      console.log('🔴 Testing .login-button specifically...');
      const loginButtons = document.querySelectorAll('.login-button');
      console.log(`Found ${loginButtons.length} .login-button elements:`);
      loginButtons.forEach((btn, index) => {
        const computedStyle = getComputedStyle(btn);
        console.log(`Button ${index + 1}:`, {
          backgroundColor: computedStyle.backgroundColor,
          background: computedStyle.background,
          element: btn
        });
      });
      
      // Force API color reload
      loadButtonColorFromAPI();
    };
    
    window.checkCurrentColors = function() {
      const root = document.documentElement;
      const style = getComputedStyle(root);
      
      console.log('🎨 Current CSS Variables:');
      console.log('--primary-color:', style.getPropertyValue('--primary-color').trim());
      console.log('--secondary-color:', style.getPropertyValue('--secondary-color').trim());
      console.log('--background-color:', style.getPropertyValue('--background-color').trim());
      console.log('--button-color:', style.getPropertyValue('--button-color').trim());
      console.log('--text-color:', style.getPropertyValue('--text-color').trim());
    };

    let staffData = []; // Store staff data globally

    function fetchStaffData() {
      fetch('/get-staff-data')
        .then(response => response.json())
        .then(data => {
          if (data.status === 'success') {
            console.log("Staff Data:", data.staff_data);
            staffData = data.staff_data;  // Store staff data in a global variable

            // Clear existing list items
            const staffList = document.getElementById('staffList');
            staffList.innerHTML = '';

            // Loop through the staff data and display it in a list
            data.staff_data.forEach(staff => {
              const listItem = document.createElement('li');
              listItem.textContent = `${staff.name} - ${staff.position}`;
              staffList.appendChild(listItem);
            });
          } else {
            console.error("Failed to fetch staff data:", data.message);
          }
        })
        .catch(error => {
          console.error("Error fetching staff data:", error);
        });
    }

    function checkDatabase() {
      fetch('/check-db-connection')
        .then(response => response.json())
        .then(data => {
          console.log("Database connection check response:", data);
          if (data.status === 'success') {
            Toastify({
              text: "Login Page",
              backgroundColor: "green",
              duration: 3000
            }).showToast();
          } else {
            Toastify({
              text: `Error: ${data.message}`,
              backgroundColor: "red",
              duration: 3000
            }).showToast();
          }
        })
        .catch(() => {
          Toastify({
            text: "Error checking database connection.",
            backgroundColor: "red",
            duration: 3000
          }).showToast();
        });
    }

    const translations = {
      en: {
        title: "Automated Employee Monitoring Software",
        subtitle: "Machine learning-based productivity & distraction detection",
        usernamePlaceholder: "Username or Email",
        rememberMe: "Remember Me",
        passwordPlaceholder: "Password",
        savePassword: "Save Password",
        forgotPassword: "Forgot Password?",
        loginButton: "LOGIN",
        guestButton: "Login as Guest",
        staffData: "Staff Data:",
        version: "DeluxeTime v1.3.0"
      },
      tr: {
        title: "İş Emri Takip Yazılımı",
        subtitle: " ",
        usernamePlaceholder: "Kullanıcı Adı veya E-posta",
        passwordPlaceholder: "Şifre",
        savePassword: "Şifreyi Kaydet",
        rememberMe: "Şifreyi Kaydet", 
        forgotPassword: "Şifremi Unuttum?",
        loginButton: "GİRİŞ",
        guestButton: "Misafir Olarak Giriş Yap",
        staffData: "Personel Verileri:",
        version: "DeluxeTime v1.3.0"
      }
    };

















function changeLanguage() {
  const selectedLanguage = document.getElementById("languageSelector").value;
  sessionStorage.setItem('selectedLanguage', selectedLanguage);  // ✅ Save to session

  const translation = translations[selectedLanguage];

  document.querySelector(".title").textContent = translation.title;
  document.querySelector(".subtitle").textContent = translation.subtitle;
  document.getElementById("username").placeholder = translation.usernamePlaceholder;
  document.getElementById("password").placeholder = translation.passwordPlaceholder;
  document.querySelector(".forgot-password").textContent = translation.forgotPassword;
  document.getElementById("loginBtn").textContent = translation.loginButton;
  document.querySelector(".staff-data h3").textContent = translation.staffData;
  document.querySelector(".version").textContent = translation.version;
  // document.getElementById("rememberMeLabel").textContent = translation.savePassword;
  document.getElementById("rememberMeLabel").textContent = translation.rememberMe;
}


















    async function handleLogin() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if (!username || !password) {
        Toastify({
          text: "Please enter both username and password",
          backgroundColor: "red",
          duration: 3000
        }).showToast();
        return;
      }

      // Check if the email exists in the staff data
      const user = staffData.find(staff => staff.email === username);
      if (!user) {
        Toastify({
          text: "Email not found in staff data",
          backgroundColor: "red",  // Red for error
          duration: 3000
        }).showToast();
        return;
      }

      // If email exists, show "User is available" toast
      Toastify({
        text: `User is available:`,
        backgroundColor: "green",  // Green for success
        duration: 3000
      }).showToast();

      // Store first name, last name, profile image, and other details in sessionStorage
      sessionStorage.setItem('user', JSON.stringify({
        firstName: user.firstname,
        lastName: user.lastname,
        profileImage: user.profile_image,
        email: user.email,
        position: user.position, // Store additional fields here
        staffid: user.staffid // Staff ID
      }));

      // Compare the password directly without encryption
      if (user.password != password) {
        Toastify({
          text: "Login successful!",
          backgroundColor: "green",  // Green for success
          duration: 3000
        }).showToast();



        if (document.getElementById("rememberMe").checked) {
        localStorage.setItem("savedUsername", username);
        localStorage.setItem("savedPassword", password);
        localStorage.setItem("rememberMe", "true");
        } else {
          localStorage.removeItem("savedUsername");
          localStorage.removeItem("savedPassword");
          localStorage.setItem("rememberMe", "false");
          }

        // ✅ Create daily log file automatically upon login
        await createDailyLogFile(user.email, user.staffid);

        // Redirect to client.html after successful login
        window.location.href = 'client';  // Fixed redirection to client.html
      } else {
        Toastify({
          text: "Invalid password",  // Red for error
          backgroundColor: "red",
          duration: 3000
        }).showToast();
      }
    }

    window.onload = function () {
      checkDatabase();
      fetchStaffData();
      
      // 🎨 Load button color from API immediately
      loadButtonColorFromAPI();
      
      let defaultLang = sessionStorage.getItem('selectedLanguage') || 'tr';
      document.getElementById("languageSelector").value = defaultLang;
      changeLanguage(defaultLang); // Apply Turkish or saved language

    const savedUsername = localStorage.getItem("savedUsername");
    const savedPassword = localStorage.getItem("savedPassword");
    const rememberMe = localStorage.getItem("rememberMe");

    if (rememberMe === "true") {
      document.getElementById("username").value = savedUsername || '';
      document.getElementById("password").value = savedPassword || '';
      document.getElementById("rememberMe").checked = true;
    }

  };

  async function login() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();
    const remember = document.getElementById("rememberMe").checked;

    if (remember) {
      localStorage.setItem("savedEmail", email);
      localStorage.setItem("savedPassword", password);
      localStorage.setItem("rememberMe", "true");
    } else {
      localStorage.removeItem("savedEmail");
      localStorage.removeItem("savedPassword");
      localStorage.setItem("rememberMe", "false");
    }
    };

  // ✅ Function to create daily log file upon login
  async function createDailyLogFile(email, staffId) {
    try {
      const loginData = {
        email: email,
        staff_id: staffId,
        action: 'login',
        timestamp: new Date().toISOString(),
        date: new Date().toISOString().split('T')[0] // YYYY-MM-DD format
      };

      const response = await fetch('/create_daily_log_file', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(loginData)
      });

      const result = await response.json();
      if (result.status === 'success') {
        console.log('✅ Daily log file created:', result.s3_url);
      } else {
        console.error('❌ Failed to create daily log file:', result.message);
      }
    } catch (error) {
      console.error('❌ Error creating daily log file:', error);
    }
  }

  </script>

</body>

</html>